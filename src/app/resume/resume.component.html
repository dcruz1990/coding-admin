<!-- Generic Dialog -->
<ng-template #genericDialog let-data let-ref="dialogRef">
    <nb-card status="primary">
        <nb-card-header>{{ data }}</nb-card-header>
        <nb-card-body>

        </nb-card-body>
        <nb-card-footer>
            <button nbButton (click)="ref.close('delete')" status="danger">Delete!</button>
        </nb-card-footer>
    </nb-card>
</ng-template>



<!-- Delete Dialog -->
<ng-template #dialogDelete let-data let-ref="dialogRef">
    <nb-card status="danger">
        <nb-card-header>Do you want to delete this {{ data.type }}</nb-card-header>
        <nb-card-body>This action cant be undone!

        </nb-card-body>
        <nb-card-footer>
            <button nbButton (click)="ref.close('delete' + data.type)" status="danger">Delete!</button>
        </nb-card-footer>
    </nb-card>
</ng-template>
<!-- Add Dialog -->
<ng-template #dialogAdd let-data let-ref="dialogRef">
    <nb-card status="success">
        <nb-card-header>Add Language</nb-card-header>
        <nb-card-body>
            <form #newLanguageForm="ngForm">
                <div class="row">
                    <div class="col">
                        <label for="title" class="label">Language Name:</label><br>
                        <input required class="form-control" nbInput type="text" [(ngModel)]="data.name" #name="ngModel"
                            name="name" id="name">
                    </div>
                </div>
            </form>
        </nb-card-body>
        <nb-card-footer>
            <button type="button" nbButton [disabled]="newLanguageForm.invalid" (click)="ref.close(data)"
                status="success">Add
                Language</button>

        </nb-card-footer>
    </nb-card>
</ng-template>

<!-- Edit Dialog -->
<ng-template #dialogEdit let-data let-ref="dialogRef">
    <nb-card status="success">
        <nb-card-header>Edit {{ data.type }}</nb-card-header>
        <nb-card-body>
            <form #editForm="ngForm" name="editForm">
                <div class="row">
                    <div class="col-md-6" *ngFor="let item of data.props">
                        <label for="{{ item.key }}" class="label">{{ item.key  }} </label><br>
                        <input nbInput [(ngModel)]="item.value" name="{{ item.key }}" id="{{ item.key }}">
                        <input type="hidden" [(ngModel)]="data.object.id" value="{{ data.object.id }}" name="id">
                    </div>
                </div>
            </form>
        </nb-card-body>
        <nb-card-footer>
            <!-- <button type="button" nbButton
                (click)="ref.close({ dt: data.object.id, body: editForm.value,type: data.type})" status="success">Edit
                {{ data.type }}</button> -->
            <button type="button" nbButton (click)="ref.close({ body: editForm.value,type: data.type})"
                status="success">Edit
                {{ data.type }}</button>

        </nb-card-footer>
    </nb-card>
</ng-template>




<div class="row">
    <div class="col-md-12">
        <nb-card [nbSpinner]="spinner">
            <nb-card-header>
                Edit Resume:
            </nb-card-header>
            <nb-card-body>
                <div class="row">
                    <div class="col-md-6">
                        <div class="col-md-6">

                            <label for="language">Your languages:</label>

                            <button nbButton status="success" (click)="openAddDialog(dialogAdd)" size="tiny">+</button>

                        </div>
                        <div class="col-md-6">
                            <nb-list>
                                <nb-list-item *ngFor="let lang of langs">
                                    <div class="col-md-8">{{ lang.name }}</div>
                                    <div class="col-md-4">
                                        <div class="row">
                                            <button (click)="openDeleteDialog(dialogDelete, lang, 'language')" nbButton
                                                status="danger" size="tiny">
                                                <nb-icon icon="trash"></nb-icon>
                                            </button>
                                            <button (click)="openEditDialog(dialogEdit, lang, 'language')" nbButton
                                                status="success" size="tiny">
                                                <nb-icon icon="edit"></nb-icon>
                                            </button>
                                        </div>
                                    </div>
                                </nb-list-item>
                            </nb-list>
                        </div>
                    </div>
                    <div class="col-md-6">
                        Your education
                        <nb-list>
                            <nb-list-item *ngFor="let education of educations">
                                <div class="col-md-8">{{ education.title }}<br>
                                    {{ education.schoolName }}<br>
                                    {{ education.dateRange }}</div>
                                <div class="col-md-4">
                                    <div class="row">
                                        <button (click)="openDeleteDialog(dialogDelete, education, 'education')"
                                            nbButton status="danger" size="tiny">
                                            <nb-icon icon="trash"></nb-icon>
                                        </button>
                                        <button (click)="openEditDialog(dialogEdit, education, 'education')" nbButton
                                            status="success" size="tiny">
                                            <nb-icon icon="edit"></nb-icon>
                                        </button>
                                    </div>
                                </div>
                            </nb-list-item>
                        </nb-list>

                    </div>
                </div>

            </nb-card-body>

        </nb-card>
    </div>
</div>